<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <style>
    body {
      margin: 0;
      height: 300vh; /* pour créer du scroll */
      background: #f0f0f0;
      font-family: Arial, sans-serif;
    }

    .wrapper {
      position: sticky;
      top: 0;
      height: 100vh;
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      padding: 20px;
      gap: 20px;
    }

    .box {
      width: 40%;
      height: 80vh;
      overflow: hidden;
      border: 2px solid black;
      background: white;
      padding: 10px;
    }

    .content1 {
      height: 200vh; /* grand contenu */
    }

    .content2 {
      height: 100vh; /* petit contenu */
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="box" id="box1">
      <div class="content1">
        <h2>Bloc Grand</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec luctus, nunc eget imperdiet sagittis, lorem libero dignissim urna, sed posuere lorem nulla non mi.</p>
        <p>Aliquam erat volutpat. Sed gravida, erat sit amet fermentum ultrices, libero nulla ultrices odio, at euismod elit nisl sit amet arcu.</p>
        <p>Phasellus blandit odio id nisi fringilla, et tincidunt nulla luctus. Vivamus ut eros sit amet purus cursus faucibus.</p>
        <p>Curabitur ac risus et ligula hendrerit pharetra. Vestibulum euismod nisi at justo tincidunt, vitae suscipit risus fermentum.</p>
        <p>Mauris nec magna in nisl vehicula porttitor. Quisque fermentum nulla at risus pharetra, sed commodo neque tristique.</p>
        <p>Aenean sed lacus ut orci tincidunt vehicula. Vivamus egestas neque id massa fermentum fermentum.</p>
        <p>Proin mattis justo nec tellus malesuada, vel pulvinar ipsum ultricies. Integer vel nulla sit amet quam euismod commodo.</p>
        <p>Fusce ac nibh id urna laoreet hendrerit. Vestibulum porta metus vel augue tincidunt, nec vulputate dolor interdum.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ducimus, perferendis temporibus eum commodi perspiciatis qui recusandae, reprehenderit beatae, quasi dignissimos non nam maxime? Quam ipsa sint quae saepe sit nam illum cumque quaerat, perferendis vitae illo nisi accusamus sequi reprehenderit aperiam voluptate pariatur nobis incidunt tenetur ratione praesentium officia repellendus possimus! Ut saepe iusto quasi, rerum distinctio eaque numquam nam esse eveniet asperiores necessitatibus corporis suscipit doloremque eligendi laborum fugit deserunt nemo libero quae nulla maxime facere consequuntur. Neque aliquid numquam modi necessitatibus unde distinctio quidem, nihil inventore perspiciatis dicta doloremque rerum possimus aperiam vitae! Soluta, laborum cumque eum culpa vitae dolor laudantium perferendis eaque aut sunt voluptatum id, ad architecto quos odio nemo harum neque aspernatur recusandae atque nesciunt. Minus voluptatem nostrum similique provident accusantium perspiciatis ab iste expedita voluptate amet aliquid explicabo eligendi reprehenderit veniam, impedit officiis consequuntur necessitatibus asperiores repellendus minima? Corporis autem similique in! Quia nulla non eius ipsam dicta fuga iure, deleniti omnis laborum quis error neque dolorum tempore iste nobis veniam quae maiores et, quisquam ullam perferendis laboriosam est? Numquam nulla quas ab iusto perspiciatis, vel omnis optio quasi sint rem. Facere minus sit tempora atque libero illum, voluptates fugiat possimus? Harum, et ipsum?</p>
        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Deleniti totam repellat a facilis earum quam placeat deserunt ipsa velit harum aliquid suscipit, nostrum, magni, maxime esse exercitationem cupiditate saepe atque soluta expedita perspiciatis ipsam explicabo enim! Ex accusantium animi iste ducimus totam inventore, quod dolorem dolorum excepturi fugiat placeat nulla asperiores optio rerum laborum nostrum. At ex explicabo dignissimos quaerat ea cum, laboriosam et inventore, suscipit aut deserunt repudiandae quasi maxime optio debitis nostrum similique. Excepturi quisquam quaerat adipisci vitae, alias fugiat unde sapiente, laboriosam velit aliquid, dignissimos non placeat labore deserunt eos repudiandae. Aliquid ipsa temporibus perferendis provident nemo.</p>
      </div>
    </div>

    <div class="box" id="box2">
      <div class="content2">
        <h2>Bloc Petit</h2>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam nostrum reiciendis exercitationem quaerat repellendus dignissimos? Sit dignissimos cupiditate, eius fuga inventore pariatur earum ullam eveniet sapiente sequi quos quo debitis provident expedita sed aut veritatis adipisci vero temporibus modi odio amet magni? Odio, minus quidem itaque distinctio fuga dolores! Sit necessitatibus excepturi, voluptatibus eum soluta in explicabo consequuntur tempora. Error modi quos veniam magnam ex inventore quia dolorem, molestias deleniti maxime quidem tempore libero a officia iure vero quas ab. Veniam saepe autem laboriosam laborum tempora corrupti! Earum sunt beatae porro? Nisi accusamus fugit incidunt quasi mollitia nam sapiente illum ex nesciunt! Velit totam doloribus provident voluptas animi quae debitis nulla ut libero eum. Et, a. Minima similique sit exercitationem nisi sint beatae dolores nam!</p>
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
        <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit.</p>
        <p>Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam.</p>
        <p>Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur.</p>
        <p>Vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
      </div>
    </div>
  </div>

  <script>
    const box1 = document.getElementById("box1");
    const box2 = document.getElementById("box2");
    const content1 = box1.querySelector(".content1");
    const content2 = box2.querySelector(".content2");

    window.addEventListener("scroll", () => {
      // progression globale 0 → 1
      const maxScroll = document.body.scrollHeight - window.innerHeight;
      const percent = window.scrollY / maxScroll;

      console.log(maxScroll, percent);
      

      // scroll maximum de chaque bloc
      const scroll1 = content1.offsetHeight - box1.offsetHeight;
      const scroll2 = content2.offsetHeight - box2.offsetHeight;
      

      // grand bloc : scrolle toujours
      const move1 = percent * scroll1;

      // petit bloc : ne commence qu’à partir de 50%
      let move2 = 0;
      if (percent > 0.5) {
        const localPercent = (percent - 0.5) / 0.5; // rééchelonnage 0→1
        move2 = localPercent * scroll2;
      }

      content1.style.transform = `translateY(-${move1}px)`;
      content2.style.transform = `translateY(-${move2}px)`;
    });
  </script>
</body>
</html>
